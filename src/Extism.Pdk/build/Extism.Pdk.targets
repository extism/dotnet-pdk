<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<UsingTask TaskName="ExtismFFIGenerator" AssemblyFile="$(MSBuildThisFileDirectory)..\build\Extism.Pdk.MSBuild.dll" />
	<Target Name="GenerateGlueCode" AfterTargets="Build">
		<ExtismFFIGenerator AssemblyPath="$(TargetPath)" OutputPath="$(IntermediateOutputPath)extism" EnvPath="$(MSBuildThisFileDirectory)..\native\env.c" />
	</Target>

	<ItemGroup>
		<NativeFileReference Include="$(IntermediateOutputPath)extism\*.c" />
		<_WasmNativeFileForLinking Include="@(NativeFileReference)" />
	</ItemGroup>

</Project>